<div align="center">
<h1>
  Sakura-13B-Galgame
</h1>
</div>

<p align="center">
ğŸ¤— <a href="https://huggingface.co/sakuraumi/Sakura-13B-Galgame" target="_blank">Hugging Face</a> â€¢ ğŸ¤– <a href="https://www.modelscope.cn/models/sakuraumi/Sakura-13B-Galgame" target="_blank">ModelScope</a>
</p>

# ä»‹ç»

åŸºäºLLaMA2-13Bï¼ŒOpenBuddy(v0.1-v0.4)å’ŒBaichuan2-13B(v0.5+)æ„å»ºï¼Œåœ¨Galgameä¸­æ—¥æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œå¾®è°ƒï¼Œæ—¨åœ¨æä¾›æ€§èƒ½æ¥è¿‘GPT3.5ä¸”å®Œå…¨ç¦»çº¿çš„Galgame/è½»å°è¯´ç¿»è¯‘å¤§è¯­è¨€æ¨¡å‹. æ–°å»ºäº†[TGäº¤æµç¾¤](https://t.me/+QMDKZyO9GV1kNDA1)ï¼Œæ¬¢è¿äº¤æµè®¨è®ºã€‚

### ç½‘ç«™ï¼š[è½»å°è¯´æœºç¿»æœºå™¨äºº](https://books.fishhawk.top/)å·²æ¥å…¥Sakuraæ¨¡å‹(v0.8-4bit)ï¼Œç«™å†…æœ‰å¤§é‡æ¨¡å‹ç¿»è¯‘ç»“æœå¯ä¾›å‚è€ƒã€‚

è½»å°è¯´æœºç¿»æœºå™¨äººç½‘ç«™æ˜¯ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆè½»å°è¯´æœºç¿»å¹¶åˆ†äº«çš„ç½‘ç«™ã€‚ä½ å¯ä»¥æµè§ˆæ—¥æ–‡ç½‘ç»œå°è¯´ï¼Œæˆ–è€…ä¸Šä¼ Epub/Txtæ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆæœºç¿»ã€‚

### æ¨¡å‹ä¸‹è½½ï¼š
|   ç‰ˆæœ¬  | å…¨é‡æ¨¡å‹ | 8-bité‡åŒ– | 4-bité‡åŒ– | 3-bité‡åŒ– |
|:-------:|:-------:|:-------:|:-------:|:-------:|
| 20230827-v0.1 | ğŸ¤— [Sakura-13B-Galgame-v0.1](https://huggingface.co/sakuraumi/Sakura-13B-Galgame/tree/main/sakura_13b_model_v0.1) | - | - | - |
| 20230908-v0.4 | ğŸ¤— [Sakura-13B-Galgame-v0.4](https://huggingface.co/sakuraumi/Sakura-13B-Galgame/tree/main/sakura_13b_model_v0.4) | - | - | - |
| 20230917-v0.5 | ğŸ¤— [Sakura-13B-Galgame-v0.5](https://huggingface.co/sakuraumi/Sakura-13B-Galgame) | ğŸ¤— [Sakura-13B-Galgame-v0.5-8bits](https://huggingface.co/sakuraumi/Sakura-13B-Galgame/tree/main/sakura_13b_model_v0.5_8bits) | [Sakura-13B-Galgame-v0.5-4bits](https://huggingface.co/sakuraumi/Sakura-13B-Galgame/tree/main/sakura_13b_model_v0.5_4bits_autogptq_40k) | - |
| 20231011-v0.7 | ğŸ¤— [Kisara-14B-LNovel](https://huggingface.co/sakuraumi/Sakura-14B-LNovel) | - | - | - |
| 20231026-v0.8 | ğŸ¤— [Sakura-13B-LNovel-v0.8](https://huggingface.co/SakuraLLM/Sakura-13B-LNovel-v0.8) | ğŸ¤— [Sakura-13B-LNovel-v0_8-8bit](https://huggingface.co/SakuraLLM/Sakura-13B-LNovel-v0_8-8bit) | ğŸ¤— [Sakura-13B-LNovel-v0_8-4bit](https://huggingface.co/SakuraLLM/Sakura-13B-LNovel-v0_8-4bit) | ğŸ¤— [Sakura-13B-LNovel-v0_8-3bit](https://huggingface.co/SakuraLLM/Sakura-13B-LNovel-v0_8-3bit) |

ç›®å‰ä»ä¸ºå®éªŒç‰ˆæœ¬ï¼Œç¿»è¯‘è´¨é‡è¾ƒå·®. 

~~lspä»¬æœ€å…³æ³¨çš„ç¿»è¯‘R18è½»å°è¯´çš„æ•ˆæœï¼šä½¿ç”¨[è¿™æœ¬r18å°è¯´](https://novel18.syosetu.com/n2975ig)çš„éƒ¨åˆ†æ–‡æœ¬ï¼Œæ¯”è¾ƒå„ç‰ˆæœ¬è¾“å‡ºæ–‡æœ¬(å…¶ä¸­GPTç½‘é¡µç«¯å’ŒAPIå‡æ— æ³•ç¿»è¯‘)ï¼Œç»“æœå·²ä¸Šä¼ è‡³[é“¾æ¥](https://huggingface.co/sakuraumi/Sakura-13B-Galgame-Archived/blob/main/r18_test.txt)~~

# æ˜¾å­˜éœ€æ±‚

ä½¿ç”¨v0.8ç‰ˆæœ¬è¿›è¡Œæµ‹è¯•ï¼Œæ¨¡å‹ç”Ÿæˆå‚æ•°ä¸ä»“åº“ä¸­`generation_config.json`ä¸€è‡´ï¼Œæ˜¾å­˜å ç”¨æ•°æ®å–è‡ª`nvidia-smi`

|  æ¨¡å‹é‡åŒ–ç±»å‹  | è½½å…¥æ˜¾å­˜ | æ¨ç†æ˜¾å­˜(ctxçº¦600) | æ¨ç†æ˜¾å­˜(ctxçº¦1800) |
|:-------:|:-------:|:-------:|:-------:|
| å…¨é‡ | è¶…å‡ºæ¸¸æˆæ˜¾å¡æ˜¾å­˜èŒƒå›´ | - | - |
| 8bit | 17G | 21.1G | 23.4G |
| 4bit | 11.3G | 14.9G | 17.4G |
| 3bit | 9.7G | 13.7G | 15.5G |

# å¿«é€Ÿå¼€å§‹

é¦–å…ˆå°†æœ¬ä»“åº“æ‹‰å–åˆ°æœ¬åœ°ã€‚

- ç¿»è¯‘Epubæ–‡ä»¶

ä»“åº“æä¾›äº†è„šæœ¬`translate_epub.py`ï¼ˆæ„Ÿè°¢[CjangCjengh](https://github.com/CjangCjengh)ï¼‰ï¼Œç”¨äºç¿»è¯‘Epubæ ¼å¼çš„å°è¯´ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š

```bash
# å‚æ•°è¯´æ˜ï¼š
# --model_name_or_pathï¼šæ¨¡å‹æœ¬åœ°è·¯å¾„æˆ–è€…huggingfaceä»“åº“idã€‚
# --model_versionï¼šæ¨¡å‹ç‰ˆæœ¬ï¼Œæœ¬ä»“åº“READMEè¡¨æ ¼ä¸­å³å¯æŸ¥çœ‹ã€‚å¯é€‰èŒƒå›´ï¼š['0.1', '0.4', '0.5', '0.7', '0.8']
# --use_gptq_modelï¼šå¦‚æœæ¨¡å‹ä¸ºgptqé‡åŒ–æ¨¡å‹ï¼Œåˆ™éœ€åŠ æ­¤é¡¹ï¼›å¦‚æ˜¯å…¨é‡æ¨¡å‹ï¼Œåˆ™ä¸éœ€è¦æ·»åŠ ã€‚
# --text_lengthï¼šæ–‡æœ¬åˆ†å—çš„æœ€å¤§å•å—æ–‡å­—æ•°é‡ã€‚
# --data_pathï¼šæ—¥æ–‡åŸæ–‡Epubå°è¯´æ–‡ä»¶è·¯å¾„ã€‚
# --data_folderï¼šæ‰¹é‡ç¿»è¯‘Epubå°è¯´æ—¶ï¼Œå°è¯´æ‰€åœ¨çš„æ–‡ä»¶å¤¹è·¯å¾„
# --output_folderï¼šç¿»è¯‘åçš„Epubæ–‡ä»¶è¾“å‡ºè·¯å¾„ï¼ˆæ³¨æ„æ˜¯æ–‡ä»¶å¤¹è·¯å¾„ï¼‰ã€‚
# --trust_remote_codeï¼šæ˜¯å¦å…è®¸æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼ˆå¯¹äº0.5ï¼Œ0.7ï¼Œ0.8ç‰ˆæœ¬æ¨¡å‹éœ€è¦åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œå¦åˆ™æŠ¥é”™ã€‚
# --llamaï¼šå¦‚æœä½ ä½¿ç”¨çš„æ¨¡å‹æ˜¯llamaå®¶æ—çš„æ¨¡å‹ï¼ˆå¯¹äº0.1ï¼Œ0.4ç‰ˆæœ¬ï¼‰ï¼Œåˆ™éœ€è¦åŠ å…¥æ­¤å‘½ä»¤ã€‚
# ä»¥ä¸‹ä¸ºä¸€ä¸ªä¾‹å­
python translate_epub.py \
    --model_name_or_path SakuraLLM/Sakura-13B-LNovel-v0_8-4bit \
    --trust_remote_code \
    --model_version 0.8 \
    --use_gptq_model \
    --text_length 512 \
    --data_path novel.epub \
    --output_folder output
```

- ç¿»è¯‘çº¯æ–‡æœ¬

ä»“åº“æä¾›äº†è„šæœ¬`translate_novel.py`ï¼Œç”¨äºç¿»è¯‘è½»å°è¯´ç­‰çº¯æ–‡æœ¬æ ¼å¼ï¼Œæ”¯æŒè¾“å‡ºä¸­æ—¥å¯¹ç…§æ–‡æœ¬ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š

```bash
# å‚æ•°è¯´æ˜ï¼š
# --model_name_or_pathï¼šæ¨¡å‹æœ¬åœ°è·¯å¾„æˆ–è€…huggingfaceä»“åº“idã€‚
# --model_versionï¼šæ¨¡å‹ç‰ˆæœ¬ï¼Œæœ¬ä»“åº“READMEè¡¨æ ¼ä¸­å³å¯æŸ¥çœ‹ã€‚å¯é€‰èŒƒå›´ï¼š['0.1', '0.4', '0.5', '0.7', '0.8']
# --use_gptq_modelï¼šå¦‚æœæ¨¡å‹ä¸ºgptqé‡åŒ–æ¨¡å‹ï¼Œåˆ™éœ€åŠ æ­¤é¡¹ï¼›å¦‚æ˜¯å…¨é‡æ¨¡å‹ï¼Œåˆ™ä¸éœ€è¦æ·»åŠ ã€‚
# --text_lengthï¼šæ–‡æœ¬åˆ†å—çš„æœ€å¤§å•å—æ–‡å­—æ•°é‡ã€‚æ¯å—æ–‡å­—é‡å°†åœ¨text_length/2è‡³text_lengthå†…éšæœºé€‰æ‹©ã€‚
# --compare_textï¼šæ˜¯å¦éœ€è¦è¾“å‡ºä¸­æ—¥å¯¹ç…§æ–‡æœ¬ï¼Œå¦‚éœ€è¦ï¼Œåˆ™éœ€åŠ æ­¤é¡¹ï¼›å¦‚ä¸éœ€è¦åˆ™ä¸è¦æ·»åŠ ã€‚
# --data_pathï¼šæ—¥æ–‡åŸæ–‡æ–‡ä»¶è·¯å¾„
# --output_pathï¼šç¿»è¯‘(æˆ–å¯¹ç…§)æ–‡æœ¬è¾“å‡ºæ–‡ä»¶è·¯å¾„
# --trust_remote_codeï¼šæ˜¯å¦å…è®¸æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼ˆå¯¹äº0.5ï¼Œ0.7ï¼Œ0.8ç‰ˆæœ¬æ¨¡å‹éœ€è¦åŠ ä¸Šè¿™ä¸ªå‚æ•°ï¼Œå¦åˆ™æŠ¥é”™ã€‚
# --llamaï¼šå¦‚æœä½ ä½¿ç”¨çš„æ¨¡å‹æ˜¯llamaå®¶æ—çš„æ¨¡å‹ï¼ˆå¯¹äº0.1ï¼Œ0.4ç‰ˆæœ¬ï¼‰ï¼Œåˆ™éœ€è¦åŠ å…¥æ­¤å‘½ä»¤ã€‚
# ä»¥ä¸‹ä¸ºä¸€ä¸ªä¾‹å­
python translate_novel.py \
    --model_name_or_path SakuraLLM/Sakura-13B-LNovel-v0_8-4bit \
    --trust_remote_code \
    --model_version 0.8 \
    --use_gptq_model \
    --text_length 512 \
    --data_path data.txt \
    --output_path data_translated.txt \
    --compare_text
```

# æ—¥å¿—

`20231026`ï¼šä¸Šä¼ ç¬¬äº”ç‰ˆæ¨¡å‹`sakura-13b-2epoch-3.8M-1025-v0.8`ï¼Œæ”¹å–„æ•°æ®é›†è´¨é‡ä¸æ ¼å¼ï¼Œä¿®å¤ä¹‹å‰ç‰ˆæœ¬æ¨¡å‹æ— æ³•æ­£ç¡®è§£æ\nçš„é—®é¢˜ï¼Œä½¿ç”¨Baichuan2-13B-Chatæ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚

`20231011`ï¼šä¸Šä¼ ç¬¬å››ç‰ˆæ¨¡å‹`sakura-14b-2epoch-4.4M-1003-v0.7`ï¼Œæ”¹ç”¨QWen-14B-Chatæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œé’ˆå¯¹è¾ƒé•¿æ–‡æœ¬è¿›è¡Œä¼˜åŒ–ï¼Œå¢åŠ æ•°æ®é›†ã€‚

`20230918`ï¼šä¸Šä¼ ç¬¬ä¸‰ç‰ˆæ¨¡å‹çš„8bitsé‡åŒ–ç‰ˆ`sakura-13b-2epoch-2.6M-0917-v0.5-8bits`ã€‚

`20230917`ï¼šä¸Šä¼ ç¬¬ä¸‰ç‰ˆæ¨¡å‹`sakura-13b-2epoch-2.6M-0917-v0.5`ï¼Œæ”¹ç”¨Baichuan2-13B-Chatæ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œç¿»è¯‘è´¨é‡æœ‰æ‰€æé«˜ã€‚

`20230908`ï¼šä¸Šä¼ ç¬¬äºŒç‰ˆæ¨¡å‹`sakura-13b-1epoch-2.6M-0903-v0.4`ï¼Œä½¿ç”¨Galgameå’Œè½»å°è¯´æ•°æ®é›†è¿›è¡Œå¾®è°ƒï¼Œè¯­æ³•èƒ½åŠ›æœ‰æ‰€æé«˜ã€‚æ„Ÿè°¢[CjangCjengh](https://github.com/CjangCjengh)å¤§ä½¬æä¾›è½»å°è¯´æ•°æ®é›†ã€‚

`20230827`ï¼šä¸Šä¼ ç¬¬ä¸€ç‰ˆæ¨¡å‹`sakura-13b-2epoch-260k-0826-v0.1`

# æ¨¡å‹è¯¦æƒ…

## æè¿°

### v0.1-v0.4

- Finetuned by [SakuraUmi](https://github.com/pipixia244)
- Finetuned on [Openbuddy-LLaMA2-13B](https://huggingface.co/OpenBuddy/openbuddy-llama2-13b-v8.1-fp16)
- Base model: [LLaMA2-13B](https://huggingface.co/meta-llama/Llama-2-13b-chat-hf)
- Languages: Chinese/Japanese

### v0.5

- Finetuned by [SakuraUmi](https://github.com/pipixia244)
- Finetuned on [Baichuan2-13B-Chat](https://huggingface.co/baichuan-inc/Baichuan2-13B-Chat)
- Base model: [Baichuan2-13B-Base](https://huggingface.co/baichuan-inc/Baichuan2-13B-Base)
- Languages: Chinese/Japanese

### v0.7

- Finetuned by [SakuraUmi](https://github.com/pipixia244)
- Finetuned on [Qwen-14B-Chat](https://huggingface.co/Qwen/Qwen-14B)
- Base model: [Qwen-14B](https://huggingface.co/Qwen/Qwen-14B)
- Languages: Chinese/Japanese

### v0.8

- Finetuned by [SakuraUmi](https://github.com/pipixia244)
- Finetuned on [Baichuan2-13B-Chat](https://huggingface.co/baichuan-inc/Baichuan2-13B-Chat)
- Base model: [Baichuan2-13B-Base](https://huggingface.co/baichuan-inc/Baichuan2-13B-Base)
- Languages: Chinese/Japanese

## ç‰ˆæœ¬

### v0.8

æ•°æ®é›†ï¼šçº¦3.8Mæ¡galgameä¸è½»å°è¯´ä¸­æ—¥å¹³è¡Œè¯­æ–™(å…±çº¦0.25Bå­—æ•°)

å¾®è°ƒæ–¹å¼ï¼šå…¨å‚æ•°

å¾®è°ƒepochæ•°ï¼š2

å‚æ•°é‡ï¼š13.9B

### v0.7

æ•°æ®é›†ï¼šçº¦1M Galgameä¸­æ—¥æ–‡æœ¬ + çº¦3.4M è½»å°è¯´ä¸­æ—¥æ–‡æœ¬

å¾®è°ƒæ–¹å¼ï¼šå…¨å‚æ•°

å¾®è°ƒepochæ•°ï¼š2

å‚æ•°é‡ï¼š14B

### v0.5

æ•°æ®é›†ï¼šçº¦260k Galgameä¸­æ—¥æ–‡æœ¬ + çº¦2.3M è½»å°è¯´ä¸­æ—¥æ–‡æœ¬

å¾®è°ƒæ–¹å¼ï¼šå…¨å‚æ•°

å¾®è°ƒepochæ•°ï¼š2

å‚æ•°é‡ï¼š13B

### v0.4

æ•°æ®é›†ï¼šçº¦260k Galgameä¸­æ—¥æ–‡æœ¬ + çº¦2.3M è½»å°è¯´ä¸­æ—¥æ–‡æœ¬

å¾®è°ƒæ–¹å¼ï¼šå…¨å‚æ•°

å¾®è°ƒepochæ•°ï¼š1

å‚æ•°é‡ï¼š13B

### v0.1

æ•°æ®é›†ï¼šçº¦260k Galgameä¸­æ—¥æ–‡æœ¬

å¾®è°ƒæ–¹å¼ï¼šå…¨å‚æ•°

å¾®è°ƒepochæ•°ï¼š2

å‚æ•°é‡ï¼š13B

## æ•ˆæœ

- Galgame

|  åŸæ–‡   |  Ours(v0.5)  |  Ours(v0.4)  |  Ours(v0.1)  | ChatGPT(GPT-3.5) |
|  ----  | ---- | ---- | ---- | ---- |
| ã€Œå¥³ã®å­ã®ä¸€äººæš®ã‚‰ã—ã£ã¦ã€ã‚„ã£ã±ä¸€éšã¯é˜²èŒƒçš„ã«å±ãªã„ã®ã‹ãªï½ï¼Ÿ ãŠçˆ¶ã•ã‚“ã«ã¯ã€ä¸€éšã¯ã‚„ã‚ã¨ã‘ï½ã£ã¦è¨€ã‚ã‚Œã¦ã¦ã­ï¼Ÿã€ | ã€Œå¥³ç”Ÿä¸€ä¸ªäººä½ï¼Œä¸€æ¥¼åœ¨é˜²èŒƒä¸Šæœç„¶å¾ˆå±é™©å—ï½ï¼Ÿæˆ‘çˆ¸çˆ¸å«æˆ‘ä¸è¦ä½ä¸€æ¥¼å“¦ã€‚ã€ | ã€Œå¥³å­©å­ä¸€ä¸ªäººä½ï¼Œæœç„¶è¿˜æ˜¯ä¸å¤ªå®‰å…¨å§ï½ï¼Ÿçˆ¸çˆ¸è¯´è¿‡ï¼Œä¸è¦ä½ä¸€æ¥¼ï½ã€ |  ã€Œä¸€ä¸ªå¥³å­©å­ä½åœ¨ä¸€æ¥¼ï¼Œè¿˜æ˜¯æœ‰ç‚¹ä¸å¤ªå®‰å…¨å§ï¼Ÿçˆ¸çˆ¸è¯´è®©æˆ‘ä¸è¦ä½åœ¨ä¸€æ¥¼ã€ | "ä¸€ä¸ªå¥³å­©å­ç‹¬è‡ªä¸€äººä½ï¼Œå¤§æ¦‚ä¸€æ¥¼ä¼šä¸å®‰å…¨å§ï½ï¼Ÿçˆ¸çˆ¸å¯¹æˆ‘è¯´è¿‡ï¼Œä¸€æ¥¼æœ€å¥½ä¸è¦ä½ï½" |
| ã€ŒåŠ©ã‘ã¦ã€èª°ã‹åŠ©ã‘ã¦ã£ã¦æ€ã„ãªãŒã‚‰ã€ãŸã ãŸã æ³£ã„ã¦ãŸã‚“ã§ã™â€¦â€¦ã€ | ã€Œæˆ‘ä¸€è¾¹æƒ³ç€è°æ¥æ•‘æ•‘æˆ‘ï¼Œä¸€è¾¹ä¸åœåœ°å“­â€¦â€¦ã€ |ã€Œæˆ‘ä¸€è¾¹æƒ³ç€æœ‰æ²¡æœ‰äººèƒ½æ•‘æ•‘æˆ‘ï¼Œä¸€è¾¹å“­å“­å•¼å•¼â€¦â€¦ã€ |  ã€Œæˆ‘ä¸€è¾¹ç¥ˆç¥·ç€ï¼Œç¥ˆç¥·ç€æœ‰äººèƒ½æ¥æ•‘æ•‘æˆ‘ä»¬ï¼Œä¸€è¾¹ä¸åœåœ°å“­æ³£â€¦â€¦ã€| ã€Œå¸®å¸®æˆ‘ï¼Œæˆ‘ä¸€è¾¹æƒ³ç€æœ‰äººå¸®åŠ©æˆ‘ï¼Œä¸€è¾¹åªæ˜¯å“­æ³£ç€â€¦â€¦ã€ |
| ã€Œãã†ã ã‚ˆã€‚ã“ã‚ŒãŒå¤ªä¸€ã®æ™®é€šã®é¡”ã ã£ã¦ã€‚ã§ã‚‚ã€ã¡ã‚‡ã£ã¨ä¸æ°—å‘³ã ã‹ã‚‰ã€ã‚ãŸã—ã¿ãŸã„ã«ãƒ‹ãƒƒã‚³ãƒªç¬‘ã£ã¦ã¿ã¦ï¼Ÿã€ | ã€Œå¯¹å•Šã€‚è¿™å°±æ˜¯å¤ªä¸€å¹³å¸¸çš„è¡¨æƒ…ã€‚ä¸è¿‡ï¼Œè¿™æ ·æœ‰ç‚¹æ¯›éª¨æ‚šç„¶ï¼Œæ‰€ä»¥è¯•ç€åƒæˆ‘è¿™æ ·ç¬‘å§ï¼Ÿã€ |ã€Œå¯¹å•Šï¼Œè¿™å°±æ˜¯å¤ªä¸€çš„æ™®é€šè¡¨æƒ…ã€‚ä¸è¿‡ï¼Œæ„Ÿè§‰æœ‰ç‚¹è¯¡å¼‚ï¼Œä½ åƒæˆ‘ä¸€æ ·ç¬‘å’ªå’ªåœ°è¯•è¯•çœ‹ï¼Ÿã€ |ã€Œæ˜¯å•Šã€‚è¿™å°±æ˜¯å¤ªä¸€çš„æ™®é€šè¡¨æƒ…ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæœ‰ç‚¹å“äººï¼Œæ‰€ä»¥ä½ ä¹Ÿè¯•ç€åƒæˆ‘ä¸€æ ·å¾®ç¬‘ä¸€ä¸‹å§ï¼Ÿã€ | â€œæ˜¯çš„å‘¢ï¼Œè¿™å°±æ˜¯å¤ªä¸€çš„å¹³å¸¸è¡¨æƒ…å“¦ã€‚ä¸è¿‡ï¼Œæœ‰ç‚¹æ€ªå¼‚ï¼Œæ‰€ä»¥åƒæˆ‘è¿™æ ·æ”¾ä¸ªç”œç”œçš„ç¬‘å®¹è¯•è¯•çœ‹ï¼Ÿâ€ |
| ã€Œãã†ã„ã†ãƒ’ãƒˆã®æ„Ÿæƒ…ã¯ã€ç™ºæƒ…æœŸã‚’è¿ãˆã¦ã‚‚ã„ãªã„ãƒã‚³ã«ã¯é›£ã—ã„ã€ | ã€Œå¯¹äºè¿˜æ²¡åˆ°å‘æƒ…æœŸçš„çŒ«æ¥è¯´ï¼Œäººç±»çš„è¿™ç§æ„Ÿæƒ…å®åœ¨æ˜¯æœ‰ç‚¹éš¾ä»¥ç†è§£ã€| ã€Œè¿™ç§äººç±»çš„æ„Ÿæƒ…ï¼Œå¯¹è¿˜æ²¡è¿›å…¥å‘æƒ…æœŸçš„çŒ«æ¥è¯´å¤ªéš¾æ‡‚äº†ã€‚ã€ |ã€Œè¿™ç§äººç±»çš„æ„Ÿæƒ…ï¼Œå¯¹è¿˜æ²¡æœ‰è¿æ¥å‘æƒ…æœŸçš„çŒ«æ¥è¯´å¤ªéš¾æ‡‚äº†ã€ | è¿™ç§äººç±»çš„æƒ…æ„Ÿå¯¹äºå°šæœªè¿›å…¥å‘æƒ…æœŸçš„çŒ«æ¥è¯´æ˜¯å¤æ‚çš„ã€‚ |
| ã€Œæœã«ãªã£ã¦ã€ç—…é™¢ã«è¡Œãã¾ã§ã€‚ãšã£ã¨ã€ãšãƒ¼ã£ã¨ãã°ã«å±…ã¦ãã‚Œã¦â€¦â€¦ã€ | ã€Œä»æ—©ä¸Šåˆ°å»åŒ»é™¢çš„è¿™æ®µæ—¶é—´ï¼Œä¸€ç›´ã€ä¸€ç›´é™ªåœ¨æˆ‘èº«è¾¹â€¦â€¦ã€ | ã€Œä¸€ç›´é™ªä¼´ç€æˆ‘ï¼Œç›´åˆ°æ—©ä¸Šå»åŒ»é™¢ä¸ºæ­¢â€¦â€¦ã€  |ã€Œä¸€ç›´é™ªæˆ‘åˆ°æ—©ä¸Šå»åŒ»é™¢ã€‚ä¸€ç›´ï¼Œä¸€ç›´é™ªåœ¨æˆ‘èº«è¾¹â€¦â€¦ã€ | "ç›´åˆ°æ—©æ™¨å»åŒ»é™¢ä¸ºæ­¢ã€‚ä¸€ç›´ï¼Œä¸€ç›´éƒ½åœ¨æˆ‘èº«æ—â€¦â€¦" |
| ã€Œãã‚Œä»¥å¤–ã¯ã€è‡ªç”±ã«éã”ã—ã¦ã„ã‚‹ãŸã‚ã€å„è‡ªãŒå¥½ãã«ã§ãã‚‹ã€ã¨ã¦ã‚‚å¹³å’Œãªéƒ¨æ´»ã ã£ãŸâ€¦â€¦ã€‚ã€ | ã€Œé™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå¯ä»¥è‡ªç”±æ´»åŠ¨ï¼Œå¤§å®¶éƒ½èƒ½éšå¿ƒæ‰€æ¬²ï¼Œæ‰€ä»¥æ˜¯éå¸¸å’Œå¹³çš„ç¤¾å›¢æ´»åŠ¨â€¦â€¦ã€ |ã€Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥è‡ªç”±æ´»åŠ¨ï¼Œæ¯ä¸ªäººéƒ½èƒ½éšå¿ƒæ‰€æ¬²ï¼Œæ˜¯ä¸ªéå¸¸å’Œå¹³çš„ç¤¾å›¢â€¦â€¦ã€ | ã€Œé™¤æ­¤ä¹‹å¤–ï¼Œç¤¾å›¢æ´»åŠ¨éƒ½æ˜¯è‡ªç”±å‚åŠ çš„ï¼Œæ¯ä¸ªäººéƒ½å¯ä»¥æŒ‰è‡ªå·±çš„æ„æ„¿å»åšè‡ªå·±æƒ³åšçš„äº‹æƒ…ï¼Œæ‰€ä»¥ç¤¾å›¢æ´»åŠ¨ä¹Ÿæ˜¯éå¸¸å’Œå¹³çš„â€¦â€¦ã€ | ã€Œé™¤æ­¤ä»¥å¤–ï¼Œå› ä¸ºå¤§å®¶éƒ½è‡ªç”±è‡ªåœ¨åœ°åº¦è¿‡æ—¶é—´ï¼Œæ˜¯ä¸ªæ¯ä¸ªäººéƒ½èƒ½æŒ‰è‡ªå·±å–œå¥½éšæ„å‚ä¸çš„éå¸¸å’Œå¹³çš„ç¤¾å›¢æ´»åŠ¨......ã€‚ã€|
| ã€Œããƒ¼ã ããƒ¼ã ã€‚ã›ã£ã‹ããŠåº—ä¼‘ã¿ã«ã—ã¦éŠã³ã«æ¥ãŸã®ã«ã€ | ã€Œå¯¹å‘€å¯¹å‘€ï¼Œéš¾å¾—æˆ‘ä»¬å…³åº—è·‘å‡ºæ¥ç©è€¶ã€‚ã€ | ã€Œæ²¡é”™æ²¡é”™ï¼Œéš¾å¾—åº—é‡Œæ”¾å‡ï¼Œæˆ‘ä»¬æ‰æ¥ç©çš„ã€‚ã€ |ã€Œæ˜¯å•Šæ˜¯å•Šï¼Œéš¾å¾—ä¼‘æ¯ä¸€å¤©ï¼Œæˆ‘è¿˜æƒ³å‡ºæ¥ç©ä¸€ä¸‹å‘¢ã€| "æ˜¯å•Šæ˜¯å•Šã€‚æœ¬æ¥åº—é“ºéš¾å¾—ä¼‘æ¯ï¼Œç‰¹åœ°è¿‡æ¥ç©çš„å‘¢ã€‚" |
| ä¼ãˆãªã‘ã‚Œã°ã€ä¼ã‚ã‚‰ãªã„ã€‚ãã£ã¨ã€å¤§äº‹ãªã“ã¨ã§ã‚ã‚‹ã»ã©ã€‚ | ä¸è¡¨è¾¾å°±ä¼ è¾¾ä¸äº†ã€‚è¶Šæ˜¯é‡è¦çš„äº‹æƒ…ï¼Œè¶Šæ˜¯å¦‚æ­¤ã€‚ | ä¸è¯´å‡ºæ¥å°±ä¸ä¼šçŸ¥é“ã€‚è¶Šæ˜¯é‡è¦çš„äº‹æƒ…ï¼Œå°±è¶Šæ˜¯ä¸èƒ½ä¸è¯´ã€‚ | -- | å¦‚æœä¸ä¼ è¾¾ï¼Œå°±ä¸ä¼šä¼ è¾¾ã€‚æ¯«æ— ç–‘é—®ï¼Œå¯¹äºé‡è¦çš„äº‹æƒ…æ¥è¯´æ˜¯å¦‚æ­¤ã€‚ |
| ãŒã€ãƒãƒãƒ­ã‚¯ã‚’æ‰‹ä¼ã†ã“ã¨ã§ãã‚ŒãŒæœãŸã›ã‚‹ã¨ã„ã†ã®ãªã‚‰ã€ä»•äº‹ãŒã©ã‚Œã»ã©å¢—ãˆã‚ˆã†ã¨ã€æ±ºã—ã¦è‹¦ã¨ã¯æ„Ÿã˜ãªã„ã€‚ | ä¸è¿‡ï¼Œå¦‚æœå¸®å¿™å…«å…­èƒ½è®©æˆ‘å®ç°è¿™ä¸ªæ„¿æœ›ï¼Œæ— è®ºå·¥ä½œå¢åŠ å¤šå°‘ï¼Œæˆ‘ä¹Ÿç»ä¸ä¼šè§‰å¾—ç—›è‹¦ã€‚ | ä¸è¿‡ï¼Œå¦‚æœå¸®åŠ©å…«å…­å°±èƒ½å®ç°è¿™ä¸ªæ„¿æœ›ï¼Œä¸ç®¡å·¥ä½œå¤šä¹ˆç¹é‡ï¼Œæˆ‘éƒ½ä¸ä¼šè§‰å¾—è¾›è‹¦ã€‚ | -- | å¦‚æœé€šè¿‡å¸®åŠ©å…«å…­å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæ— è®ºå·¥ä½œå¢åŠ å¤šå°‘ï¼Œæˆ‘ç»ä¸ä¼šæ„Ÿåˆ°è‹¦æ¼ã€‚ |

- è½»å°è¯´(å…¨é¾„)

ä½¿ç”¨[è¯¥ä»“åº“](https://github.com/FishHawk/sakura-test)çš„æµ‹è¯•æ–‡æœ¬ï¼Œä»“åº“å†…æä¾›äº†æµ‹è¯•ä»£ç ï¼Œæµ‹è¯•æ–‡æœ¬ä»¥åŠv0.5ç‰ˆæœ¬çš„æµ‹è¯•ç»“æœã€‚ä½¿ç”¨è¯¥ä»“åº“ä»£ç åœ¨v0.7æ¨¡å‹ä¸Šå¯¹æµ‹è¯•æ–‡æœ¬è¿›è¡Œæµ‹è¯•çš„ç»“æœå·²ä¸Šä¼ åˆ°[sakuraumi/Sakura-13B-Galgame-Archived](https://huggingface.co/sakuraumi/Sakura-13B-Galgame-Archived/blob/main/text.sa-packed)ã€‚

[è¯¥ä»“åº“](https://github.com/FishHawk/sakura-test)æ›´æ–°äº†v0.8ç‰ˆæœ¬çš„æµ‹è¯•ï¼Œå¹¶æä¾›äº†æµ‹è¯•ä»£ç ï¼ˆéœ€è¦è‡ªå»ºopenai like apiåç«¯ï¼‰ã€‚

ä¹Ÿå¯ä»¥é€šè¿‡æœ¬ä»“åº“çš„ç¿»è¯‘è„šæœ¬è‡ªè¡Œæµ‹è¯•å¯¹æ¯”ã€‚

- è½»å°è¯´(R18)

ä½¿ç”¨[è¿™æœ¬r18å°è¯´](https://novel18.syosetu.com/n2975ig)çš„éƒ¨åˆ†æ–‡æœ¬ï¼Œæ¯”è¾ƒå„ç‰ˆæœ¬è¾“å‡ºæ–‡æœ¬(å…¶ä¸­GPTç½‘é¡µç«¯å’ŒAPIå‡æ— æ³•ç¿»è¯‘)ï¼Œç»“æœå·²ä¸Šä¼ è‡³[é“¾æ¥](https://huggingface.co/sakuraumi/Sakura-13B-Galgame-Archived/blob/main/r18_test.txt)

# æ¨ç†

- Galgameç¿»è¯‘çš„promptæ„å»ºï¼š

  - v0.1

    ```python
    input_text = "" # ç”¨æˆ·è¾“å…¥
    query = "å°†ä¸‹é¢çš„æ—¥æ–‡æ–‡æœ¬ç¿»è¯‘æˆä¸­æ–‡ï¼š" + input_text
    prompt = "Human: \n" + query + "\n\nAssistant: \n"
    ```
    
  - v0.4

    ```python
    input_text = "" # ç”¨æˆ·è¾“å…¥
    query = "å°†ä¸‹é¢çš„æ—¥æ–‡æ–‡æœ¬ç¿»è¯‘æˆä¸­æ–‡ï¼š" + input_text
    prompt = "User: " + query + "\nAssistant: "
    ```

  - v0.5ä¸v0.8

    ```python
    input_text = "" # ç”¨æˆ·è¾“å…¥
    query = "å°†ä¸‹é¢çš„æ—¥æ–‡æ–‡æœ¬ç¿»è¯‘æˆä¸­æ–‡ï¼š" + input_text
    prompt = "<reserved_106>" + query + "<reserved_107>"
    ```
    
  - v0.7
    å‚è€ƒQwen-14B-Chatçš„promptæ„é€ æ–¹å¼ï¼š[è¿™é‡Œ](https://huggingface.co/Qwen/Qwen-14B-Chat/blob/5188dfeb4ff175705aa3a84ef9d616c70dea029b/qwen_generation_utils.py#L119)å’Œ[è¿™é‡Œ](https://github.com/hiyouga/LLaMA-Efficient-Tuning/blob/5310e4d1829f36619c8f224d09ec15eeaf7a4877/src/llmtuner/extras/template.py#L546)


- æ¨ç†ä¸è§£ç å‚æ•°ï¼š

| å‚æ•° | å€¼ |
| ---- | ---- |
| temperature | 0.1 |
| top p | 0.3 |
| do sample | True |
| beams number | 1 |
| repetition penalty | 1 |
| max new token | 512 |
| min new token | 1 |

- é‡åŒ–ï¼š

æ ¹æ®transformersæ–‡æ¡£ä¸­ç»™å‡ºçš„AutoGPTQé‡åŒ–æ•™ç¨‹è‡ªè¡Œé‡åŒ–ï¼Œæˆ–ä½¿ç”¨æˆ‘ä»¬å·²ç»é‡åŒ–å¥½çš„æ¨¡å‹ã€‚

ä½¿ç”¨é‡åŒ–æ¨¡å‹æ¨ç†çš„ç¤ºä¾‹ä»£ç ï¼š

```python
from transformers import AutoTokenizer, GenerationConfig
from auto_gptq import AutoGPTQForCausalLM

path = "path/to/your/model"
text = "" #è¦ç¿»è¯‘çš„æ–‡æœ¬

generation_config = GenerationConfig.from_pretrained(path)
tokenizer = AutoTokenizer.from_pretrained(path, use_fast=False, trust_remote_code=True)
model = AutoGPTQForCausalLM.from_quantized(path, device="cuda:0", trust_remote_code=True)

response = tokenizer.decode(model.generate(**tokenizer(f"<reserved_106>å°†ä¸‹é¢çš„æ—¥æ–‡æ–‡æœ¬ç¿»è¯‘æˆä¸­æ–‡ï¼š{text}<reserved_107>", return_tensors="pt").to(model.device), generation_config=generation_config)[0]).replace("</s>", "").split("<reserved_107>")[1]
print(response)
```

# å¾®è°ƒ

æµç¨‹ä¸LLaMA2(v0.1-v0.4)/Baichuan2(v0.5ä¸v0.8)/Qwen14B(v0.7)ä¸€è‡´ï¼Œpromptæ„é€ å‚è€ƒæ¨ç†éƒ¨åˆ†

# åç»­å·¥ä½œ

1. ä¼˜åŒ–æ•°æ®é›†ï¼Œä¸»è¦ä¼˜åŒ–æ•°æ®é›†è´¨é‡
2. æ”¯æŒä¸Šä¸‹æ–‡ç†è§£
3. æ”¯æŒæŒ‡å®šä¸“æœ‰åè¯

# è‡´è°¢

- [CjangCjengh](https://github.com/CjangCjengh)

- [ryank231231](https://github.com/ryank231231)

- [KurikoMoe](https://github.com/kurikomoe)

- [FishHawk](https://github.com/FishHawk)

- [K024](https://github.com/K024)

- [minaduki-sora](https://github.com/minaduki-sora)

- [Kimagure7](https://github.com/Kimagure7)

- [YYF233333](https://github.com/YYF233333)

# Copyright Notice

This model is built upon Meta's LLaMA series of models and is subject to Meta's licensing agreement.

This model is intended for use only by individuals who have obtained approval from Meta and are eligible to download LLaMA.

If you have not obtained approval from Meta, you must visit the https://ai.meta.com/llama/ page, read and agree to the model's licensing agreement, submit an application, and wait for approval from Meta before downloading the model from this page.
